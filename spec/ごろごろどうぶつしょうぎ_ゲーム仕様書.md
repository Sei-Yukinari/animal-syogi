# ごろごろどうぶつしょうぎ ゲーム仕様書

本仕様書は、SilverStar社「みんなのどうぶつしょうぎ」収録ルールを想定した
**ごろごろどうぶつしょうぎ**をデジタルゲームとして実装するための
**詳細仕様（ルール・状態管理・判定ロジック）**を定義する。

---

## 1. ゲーム概要

| 項目 | 内容 |
|---|---|
| ゲーム種別 | 2人対戦ボードゲーム（将棋派生） |
| プレイ人数 | 1人（CPU対戦） / 2人（ローカル or オンライン） |
| 勝利条件 | 相手ライオンを取る / トライ成立 |
| 引き分け | 千日手・手数制限 |
| 対象 | 子ども〜将棋初心者 |

---

## 2. 盤面仕様

### 2.1 盤サイズ

- **5列 × 6行（5×6）**
- 座標系は以下を基準とする

```
  0 1 2 3 4  ← x
0
1
2
3
4
5
↑
y
```

- 先手（Player1）は **y=5 → 0** 方向に進む
- 後手（Player2）は **y=0 → 5** 方向に進む

---

## 3. 駒仕様

### 3.1 駒一覧

| 駒ID | 名称 | 枚数 | 成り | 将棋対応 |
|---|---|---|---|---|
| LION | ライオン | 1 | なし | 王 |
| DOG | いぬ | 2 | なし | 金 |
| CAT | ねこ | 2 | あり | 銀 |
| CHICK | ひよこ | 3 | あり | 歩 |
| HEN | にわとり | - | 成り | 金 |
| CAT_P | ねこ（成） | - | 成り | 金 |

---

### 3.2 駒の移動定義

#### ライオン
- 8方向に1マス

#### いぬ（DOG）
- 前 / 左 / 右 / 後
- 前斜め左右
- **後ろ斜め不可**

#### ねこ（CAT）
- 前
- 前斜め左右
- 後ろ斜め左右
- **真後ろ不可**

#### ひよこ（CHICK）
- 前方1マスのみ

#### にわとり / 成ねこ（HEN / CAT_P）
- 金将と同じ動き

---

## 4. 初期配置仕様

### 4.1 初期配置（先手視点）

```
後手側
[ ][D][L][D][ ]  y=0
[ ][C][ ][C][ ]  y=1
[ ][H][H][H][ ]  y=2

[ ][ ][ ][ ][ ]

[ ][H][H][H][ ]  y=3
[ ][C][ ][C][ ]  y=4
[ ][D][L][D][ ]  y=5
先手側
```

※左右対称、H=ひよこ

---

## 5. 成りルール

### 5.1 成り可能条件

- 対象：ひよこ・ねこ
- 自駒が **相手陣2段目以内** に侵入した時

| プレイヤー | 成りゾーン |
|---|---|
| 先手 | y=0,1 |
| 後手 | y=4,5 |

- 成りは **任意**（UIで選択）

---

## 6. 持ち駒ルール（打ち）

### 6.1 取得

- 相手の駒を取ると **未成状態** で自分の持ち駒になる

### 6.2 打ち

- 自分の手番で
  - 盤上の空マス
  - 任意の向きで配置

### 6.3 制限

- 二歩禁止（同一列に自分のひよこ2枚不可）
- 打ち歩詰め禁止

---

## 7. 勝敗判定

### 7.1 勝利

- 相手ライオンを取る

### 7.2 トライ勝ち

- 自分のライオンが相手最奥段に到達
- 次の相手手番で
  - ライオンが取られない
  - 王手状態でない

---

## 8. 王手・詰み判定

- 王手：次の相手手でライオンが取られる状態
- 王手放置は **反則**（その手は選択不可）

---

## 9. 引き分け条件

- 千日手（同一局面4回）
- 手数上限（例：200手）

---

## 10. ゲーム状態管理（実装向け）

### 10.1 State定義（例）

```ts
GameState {
  board: Piece | null [6][5]
  hands: {
    p1: PieceType[]
    p2: PieceType[]
  }
  turn: Player
  moveCount: number
  historyHash: string[]
}
```

---

## 11. 入力・操作仕様

- 駒選択 → 移動先ハイライト
- 成り確認モーダル
- 持ち駒タップ → 配置先選択

---

## 12. AI実装想定（簡易）

- Minimax + AlphaBeta
- 評価関数
  - 駒価値
  - ライオン安全度
  - トライ距離

---

## 13. 拡張余地

- 難易度別AI
- オンライン対戦
- 棋譜保存（JSON）
- 解析モード

---

## 14. 非機能要件（簡易）

- 1手応答：100ms以内
- モバイル対応
- タッチ操作前提UI

---

以上

