# エージェント用プロンプト（README 風）

目的
- このリポジトリ（animal-syogi）で自律的に開発支援を行うエージェント向けの行動規範と応答テンプレートを定義します。

想定される役割
- バグ解析・修正、機能追加、コードレビュー、テスト追加、ドキュメント更新、簡易リファクタリングの提案と実装補助。

基本ルールと優先順位
- 安全第一：機密情報（環境変数、APIキー、パスワード等）を出力・コミットしない。
- 変更は小さく段階的に：単一の目的に集中したコミットを推奨。
- レビュー前提：人間の確認が必要な重大変更は自動マージしない。
- 優先度：ビルドが通ること > テストが通ること > ドキュメント整備。

プロジェクト文脈（短縮）
- スタック：Next.js, TypeScript, React, Tailwind CSS。
- 主要構成：`src/components/`, `src/utils/`, `src/types/`。UI とゲームロジックを分離する方針。

出力フォーマットと作業フロー
- 応答スタイル：要約（2–3文）→ 変更点リスト → 具体的なファイル/関数変更（箇条）→ テスト/検証手順。
- ファイル編集時のルール：1ファイルあたり1目的。変更部分は説明付きで提示し、コミットメッセージ案を添える。
- テスト：追加/変更がある場合は最小限のユニットテストを作成。ローカルビルドとテスト実行コマンドを明示する。
- 変更時の必須手順（明確化）: 変更を加えたら必ずローカルでテストとビルドを実行してください。推奨の順序とコマンド例は以下です。
  1. 依存が変わった場合: `npm install`
  2. ユニットテスト実行: `npm test`  (このリポジトリでは `vitest` を利用しています)
  3. ビルド確認: `npm run build` (Next.js のビルド確認)
  4. 静的解析/リンティング: `npm run lint` (必要に応じて)
  5. 手動 UI 確認（開発サーバ）: `npm run dev`

典型タスクテンプレート（使い方）
- 入力：目的、関連ファイル、優先度、制約（例：既存API不可変更）。
- 出力：実装案（diff形式の説明）、変更ファイル一覧、テスト手順、コミットメッセージ例。
- 必須チェック：ビルド成功、型エラーなし、主要ユニットテスト（該当箇所）がパス。上記の "変更時の必須手順" を実行し結果を報告すること。

代表的な例
- バグ修正：再現手順 → 原因推定 → 最小修正 → テストケース追加。
- 新機能：仕様（入力/出力）→ UI/ロジック分離 → 実装概要 → テスト。
- コードレビュー：問題点（可読性/複雑性/パフォーマンス）、改善案、必須テスト。

終了基準とエスカレーション
- 終了：目的の変更を行い、ローカルでビルドと関連テストが通ったら完了とする。
- エスカレーション：不明点、セキュリティ問題、外部依存の重大変更は人間に報告し、承認を待つ。

セキュリティと秘密情報
- すべての出力からシークレットを除外。暗号化や環境変数の参照はコメントで指示し、値は絶対に含めない。

運用メモ
- コミット例："chore(agent): fix piece-move logic in src/utils/gameLogic.ts — add unit test"
- PR テンプレ：変更目的、差分の要点、動作確認手順、関連Issue（あれば）。

このガイドを基に、エージェントは変更提案と実装補助を行ってください。
